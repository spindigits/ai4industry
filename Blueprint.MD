# Blueprint - GROUPE 1 - RAG UI

Groupe 1

## üìã Vue d'ensemble du projet

Syst√®me de **Retrieval-Augmented Generation (RAG) Hybride** qui combine deux approches compl√©mentaires pour r√©pondre intelligemment aux questions sur les produits et √©v√©nements de GreenPower Solutions :

- **Recherche vectorielle** (Qdrant + LangChain) pour les questions descriptives simples
- **Graphe de connaissances** (Neo4j) pour les questions relationnelles complexes n√©cessitant du multi-hop reasoning

### üéØ Objectif

Permettre de poser des questions en langage naturel sur :
- Les produits solaires autonomes GreenPower
- Les √©v√©nements (salons, festivals aliment√©s)
- Les ventes et d√©ploiements
- Les projets R&D
- Les relations entre ces entit√©s

### üèóÔ∏è Architecture Globale

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      INTERFACE UTILISATEUR                            ‚îÇ
‚îÇ                         (app.py - Streamlit)                          ‚îÇ
‚îÇ                                                                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ   RAG    ‚îÇ  ‚îÇ   RAG    ‚îÇ  ‚îÇ Routeur  ‚îÇ  ‚îÇ  Dashboard   ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ  Simple  ‚îÇ  ‚îÇ Hybride  ‚îÇ  ‚îÇ  Intel.  ‚îÇ  ‚îÇ  M√©triques   ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ (Qdrant) ‚îÇ  ‚îÇ  Q+Neo4j ‚îÇ  ‚îÇ  (Auto)  ‚îÇ  ‚îÇ(src/ui/dash) ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    COUCHE DE ROUTAGE                         ‚îÇ
‚îÇ                  (src/core/hybrid_rag.py)                    ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  classify_question() ‚Üí d√©termine la strat√©gie optimale       ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ Keywords multi-hop ‚Üí RAG Hybride                     ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ Keywords simples ‚Üí RAG Simple                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚ñº                                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  QDRANT          ‚îÇ                    ‚îÇ  NEO4J           ‚îÇ
‚îÇ  (Vectoriel)     ‚îÇ                    ‚îÇ  (Graphe)        ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ                  ‚îÇ
‚îÇ ‚Ä¢ Embeddings     ‚îÇ                    ‚îÇ ‚Ä¢ N≈ìuds:         ‚îÇ
‚îÇ ‚Ä¢ Similarit√©     ‚îÇ                    ‚îÇ   - Product      ‚îÇ
‚îÇ   s√©mantique     ‚îÇ                    ‚îÇ   - Event        ‚îÇ
‚îÇ ‚Ä¢ Documents      ‚îÇ                    ‚îÇ   - TradeShow    ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ   - Sale         ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ   - RDProject    ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ   - BatteryType  ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ                  ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ ‚Ä¢ Relations:     ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ   - DEPLOYED_AT  ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ   - SOLD_AT      ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ   - USES_BATTERY ‚îÇ
‚îÇ                  ‚îÇ                    ‚îÇ   - etc.         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                                         ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     MISTRAL AI LLM                           ‚îÇ
‚îÇ              (via LangChain ChatMistralAI)                   ‚îÇ
‚îÇ  ‚Ä¢ G√©n√©ration de r√©ponses contextualis√©es                    ‚îÇ
‚îÇ  ‚Ä¢ Embeddings (MistralAIEmbeddings)                          ‚îÇ
‚îÇ  ‚Ä¢ Chat (mistral-small-latest, mistral-large, pixtral)       |
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì¶ Modules et Fonctionnalit√©s

### 1. **src/core/hybrid_rag.py** - Routeur Intelligent et Orchestrateur

**R√¥le principal**: Classifier les questions et orchestrer la strat√©gie de r√©ponse appropri√©e.

#### Classe `HybridRAG`

**Fonctionnalit√©s principales**:

- **`classify_question(question)`**
  - Analyse la question pour d√©terminer la complexit√©
  - D√©tecte les mots-cl√©s multi-hop (relations, agr√©gations, √©v√©nements) et scores
  - D√©tecte les mots-cl√©s simples (descriptions, sp√©cifications)
  - Retourne: `"simple"` ou `"multi_hop"`

- **`query_simple(question, vector_store)`**
  - RAG classique avec Qdrant uniquement (via `LangChain QdrantVectorStore`)
  - Recherche par similarit√© s√©mantique (top 3 documents)
  - G√©n√®re une r√©ponse avec le LLM Mistral
  - Cas d'usage: "Qu'est-ce que le produit GreenPower Max?"

- **`query_hybrid(question, vector_store)`**
  - RAG hybride combinant Qdrant + Neo4j
  - R√©cup√®re le contexte vectoriel (Qdrant)
  - R√©cup√®re le contexte relationnel (Neo4j via `Neo4jQuerier`)
  - Fusionne les deux contextes dans un prompt enrichi
  - Cas d'usage: "Quels √©v√©nements ont utilis√© des produits vendus √† Pollutec Paris?"

- **`query(question, vector_store, force_strategy=None)`**
  - Point d'entr√©e principal avec routage automatique
  - Permet de forcer une strat√©gie si n√©cessaire
  - Retourne: `{answer, sources, strategy}`

- **`explain_routing(question)`**
  - Explique pourquoi une strat√©gie a √©t√© choisie
  - Utile pour la transparence et le debugging

**Exemples de questions trait√©es**:
- Simple: "Quel est le prix du GreenPower Max?"
- Multi-hop: "Quels projets R&D visent les produits utilis√©s aux festivals?"
- Multi-hop: "Quel est le CO2 total √©conomis√© par PG-M01?"

---

### 2. **src/services/neo4j_query.py** - Requ√™tes Multi-Hop sur le Graphe

**R√¥le principal**: Ex√©cuter des requ√™tes Cypher complexes pour extraire des informations relationnelles.

#### Classe `Neo4jQuerier`

**Requ√™tes multi-hop complexes**:

- **`query_events_with_products_sold_at_tradeshows(location=None)`**
  - Chemin: `Product ‚Üí DEPLOYED_AT ‚Üí Event` + `Product ‚Üê INCLUDES_PRODUCT ‚Üê Sale ‚Üí SOLD_AT ‚Üí TradeShow`
  - Question: "Quels √©v√©nements ont utilis√© des produits vendus √† Pollutec Paris?"
  - Multi-hop: 2 sauts dans le graphe

- **`query_total_co2_saved_by_product(product_id)`**
  - Chemin: `Product ‚Üí DEPLOYED_AT ‚Üí Event` (avec agr√©gation CO2)
  - Question: "Quel est le CO2 total √©conomis√© par tous les d√©ploiements de PG-M01?"
  - Agr√©gation: Somme des r√©ductions CO2 sur tous les √©v√©nements par produit

- **`query_tradeshows_sales_by_customer_type(customer_type)`**
  - Chemin: `TradeShow ‚Üê SOLD_AT ‚Üê Sale` (filtr√© par type client)
  - Question: "Quels salons ont g√©n√©r√© le plus de revenus avec les collectivit√©s?"
  - Agr√©gation: Somme des revenus par salon

- **`query_rd_projects_for_festival_products()`**
  - Chemin: `Event ‚Üê DEPLOYED_AT ‚Üê Product ‚Üê TARGETS_PRODUCT ‚Üê RDProject`
  - Question: "Quels projets R&D visent les produits utilis√©s aux festivals?"
  - Multi-hop: 3 sauts + filtrage par type d'√©v√©nement

- **`query_events_powered_by_product_type(category)`** (Nouveau)
  - Chemin: `Product ‚Üí DEPLOYED_AT ‚Üí Event`
  - Question: "Quels √©v√©nements ont √©t√© aliment√©s par du Solaire?"
  - Filtre sur la cat√©gorie du produit

**Requ√™tes simples**:

- **`query_products_by_battery_type(battery_type)`**
  - Recherche produits par type de batterie (LiFePO4, Tesla)

- **`query_top_revenue_tradeshows(limit=5)`**
  - Top salons par revenu g√©n√©r√©

- **`query_product_sales_across_tradeshows(product_id)`**
  - Historique des ventes d'un produit sur tous les salons

**Fonctions utilitaires**:

- **`get_graph_context_for_question(question)`**
  - Analyse la question et ex√©cute automatiquement les requ√™tes pertinentes
  - Logique de d√©tection √©tendue :
    1. √âv√©nements avec produits vendus aux salons
    2. CO2 √©conomis√© par produit
    3. Ventes aux collectivit√©s
    4. Projets R&D pour festivals
    5. Produits par type de batterie
    6. Top Salons
    7. Historique de ventes d'un produit
    8. √âv√©nements aliment√©s par type de produit
  - Retourne une liste de r√©sultats structur√©s

- **`format_graph_context(context)`**
  - Formate les r√©sultats du graphe en texte lisible pour le LLM
  - Convertit les r√©sultats Neo4j en contexte textuel

---

### 3. **src/services/neo4j_loader.py** - Chargement des Donn√©es dans le Graphe

**R√¥le principal**: Parser les fichiers JSON et cr√©er le graphe Neo4j complet avec toutes les relations.

#### Classe `Neo4jLoader`

**Fonctionnalit√©s**:

- **`clear_database()`**: Nettoie toutes les donn√©es du graphe
- **`create_indexes()`**: Index sur product_id, event_id, trade_show_id, etc.
- **`load_products(products_file)`**: Cr√©e noeuds `Product` et `BatteryType`
- **`load_events(events_file)`**: Cr√©e noeuds `TradeShow`, `Event`, `Sale` et relations (`SOLD_AT`, `DEPLOYED_AT`, `INCLUDES_PRODUCT`)
- **`load_rd_projects(rd_file)`**: Cr√©e noeuds `RDProject` et relations `TARGETS_PRODUCT`
- **`load_all()`**: Orchestre le chargement complet

**Mod√®le de donn√©es cr√©√©**:
- 6 Types de n≈ìuds: Product, Event, TradeShow, Sale, RDProject, BatteryType
- Relations cl√©s: DEPLOYED_AT, SOLD_AT, INCLUDES_PRODUCT, TARGETS_PRODUCT, USES_BATTERY, DISPLAYED_AT

---

### 4. **app.py** - Interface Utilisateur Streamlit

**R√¥le principal**: Interface web interactive pour interagir avec le syst√®me RAG hybride.

#### Fonctionnalit√©s de l'application

**Composants**:

- **`src.services.rag_init`**: Initialise les composants LangChain (`QdrantVectorStore`, `ChatMistralAI`) et `HybridRAG`.
- **`src.services.loaders`**: Gestion de l'upload et parsing (PDF, TXT, JSON, CSV).
- **`src.ui.styles`**: CSS personnalis√©.

**Onglets principaux**:

1. **üß≠ ChatBOT**
   - **Mode Routeur Intelligent**: Classification automatique (simple vs multi-hop). Badge visuel de la strat√©gie.
   - **Affichage des r√©ponses**: R√©ponse g√©n√©r√©e + Sources (Onglets s√©par√©s: "üìö Documents (Qdrant)" et "üï∏Ô∏è Relations (Neo4j)").
   - **Explication du routage**: Affiche pourquoi une strat√©gie a √©t√© choisie.

2. **üìä Dashboard M√©triques**
   - Visualisation de l'√©tat des bases de donn√©es.

**Sidebar**:
- **Upload de documents**: Drag & drop support√©.
- **Administration**: Reset Neo4j, Reset Qdrant.
- **Mod√®le de Raisonnement**: S√©lecteur de LLM (mistral-small, mistral-large, pixtral).
- **Exemples**: acc√®s rapide aux questions types.

---

### 5. **src/ui/dashboard.py** - Dashboard de M√©triques et Performance

**R√¥le principal**: Collecter et afficher les m√©triques de performance en temps r√©el de Qdrant et Neo4j.

#### Classe `DashboardMetrics` et Fonction `render_dashboard`

- **M√©triques Qdrant**: Collection, documents, vecteurs. Test de performance de recherche.
- **M√©triques Neo4j**: Compte des n≈ìuds et relations. Test de performance des requ√™tes Cypher.
- **√âtat du Syst√®me**: Indicateurs de sant√© (Vert/Rouge) pour Qdrant et Neo4j.

---

## üîÑ Flux de Donn√©es

### Flux Question ‚Üí R√©ponse (RAG Simple)

```
1. Utilisateur pose une question: "Quel est le prix du GreenPower Max?"
   ‚Üì
2. HybridRAG.classify_question() ‚Üí "simple"
   ‚Üì
3. HybridRAG.query_simple()
   ‚Üì
4. Recherche vectorielle Qdrant (LangChain retriever, top 3)
   ‚Üì
5. Contexte envoy√© au LLM Mistral (via PromptTemplate)
   ‚Üì
6. G√©n√©ration de la r√©ponse
   ‚Üì
7. Retour: {answer, sources: {vector_docs}, strategy: "simple"}
```

### Flux Question ‚Üí R√©ponse (RAG Hybride)

```
1. Utilisateur pose: "Quels √©v√©nements ont utilis√© des produits vendus √† Paris?"
   ‚Üì
2. HybridRAG.classify_question() ‚Üí "multi_hop"
   ‚Üì
3. HybridRAG.query_hybrid()
   ‚Üì
4. Parall√®lement:
   ‚îú‚îÄ> Qdrant: recherche vectorielle (top 3 docs)
   ‚îî‚îÄ> Neo4j: get_graph_context_for_question()
       ‚îî‚îÄ> D√©tecte: "√©v√©nements" + "vendus" + "paris"
       ‚îî‚îÄ> Ex√©cute: query_events_with_products_sold_at_tradeshows("Paris")
   ‚Üì
5. Fusion des deux contextes dans un prompt enrichi (System + Vector + Graph context)
   ‚Üì
6. LLM Mistral g√©n√®re r√©ponse bas√©e sur les deux sources
   ‚Üì
7. Retour: {answer, sources: {vector_docs, graph_context}, strategy: "hybrid"}
```

---

## üíæ Mod√®le de Donn√©es Neo4j

### N≈ìuds

```
(Product)
‚îú‚îÄ product_id, name, category, price, ...
(Event)
‚îú‚îÄ name, type, location, attendees, co2_reduction, ...
(TradeShow)
‚îú‚îÄ name, location, date, ...
(Sale)
‚îú‚îÄ customer_type, total_revenue, units
(RDProject)
‚îú‚îÄ name, objective, status, projected_savings
(BatteryType)
‚îú‚îÄ type
```

### Relations

```
(Product)-[:DEPLOYED_AT {quantity}]->(Event)
(Product)-[:DISPLAYED_AT]->(TradeShow)
(Product)-[:USES_BATTERY]->(BatteryType)

(Sale)-[:SOLD_AT]->(TradeShow)
(Sale)-[:INCLUDES_PRODUCT {quantity}]->(Product)

(RDProject)-[:TARGETS_PRODUCT]->(Product)
```

---

## üöÄ D√©ploiement et Configuration

### Variables d'environnement requises (.env)

```bash
MISTRAL_API_KEY=your_key_here
QDRANT_ENDPOINT=https://your-cluster.qdrant.io
QDRANT_API_KEY=your_key_here
NEO4J_URI=neo4j+ssc://your-instance.neo4j.io
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your_password
```

### Commandes principales

```bash
# Lancer l'application
streamlit run app.py
```

---

## üîç Avantages de l'Architecture Hybride

- **RAG Simple**: Rapide, simple, id√©al pour le factuel.
- **RAG Hybride**: Multi-hop, agr√©gations, relations, d√©passe les limites du vectoriel pur.
- **Routeur Intelligent**: Optimisation automatique des co√ªts et de la latence.

---

## üõ†Ô∏è Technologies Utilis√©es

| Technologie | R√¥le |
|------------|------|
| **Streamlit** | Interface web interactive |
| **Qdrant** | Base vectorielle (embeddings) |
| **Neo4j** | Graphe de connaissances |
| **Mistral AI** | LLM + Embeddings (via LangChain) |
| **LangChain** | Framework RAG (ChatMistralAI, QdrantVectorStore) |
| **Python 3.9+** | Langage principal |

---

## üë• Cr√©dits

**D√©velopp√© par le groupe 1 :**
- Enzo
- Kyllian
- Romain
- Will
- Yov√®n

